---
title: "Task"
author: "Yevheniia Zhernova"
date: "28/10/2025"
format:
  html:
    embed-resources: true
editor: source
---

## Question 1 Atomic Types
Question description

Create the following variables related to your chosen object:
- 4 numeric values (e.g., population, temperature, size, rating)  
- 3 integer values (e.g., number of moons, buildings, inhabitants)  
- 2 logical values (e.g., has_water, is_inhabited)  
- 3 character values (e.g., name, region, category)

```{r}
# numeric values
distance_to_bratislava_km <- 16.3    # km (approx.)
elevation_m <- 130                 # meters (approx.)
area <- 14.5                  # <-- теперь создаётся
avg_density <- 620                 # numeric,



# code for solving task
# integer
population <- 9000L
num_parks <- 5L
num_schools <- 3L

#character
name <- "Bernolákovo"
old_name <- "Cseklész"
region <- "Bratislavský kraj"
category <- "Obec"  

# logical
has_water <- TRUE
is_inhabited <- TRUE
```

## Question 2 Vectors

Question description
Create three different vectors:

```{r}
# code for solving task
# 1. Numeric vector
numeric_vector <- c(population, area)
numeric_vector
# [1] 9000.0   14.5

# 2. Sequence vector (from 20 to 100 step 5)
sequence_vector <- seq(from = 20, to = 100, by = 5)
sequence_vector
# [1] 20 25 30 ... 100

# 3. Logical vector of 10 random TRUE/FALSE 
set.seed(123)  # for repeating result
logical_vector <- sample(c(TRUE, FALSE), size = 10, replace = TRUE)
logical_vector
```

## Question 3 Matrix

```{r}
set.seed(42)  # for reproducibility

# 3×3 matrix with random integers between -50 and 50
m <- matrix(
sample(-50:50, size = 9, replace = TRUE),
nrow = 3, ncol = 3, byrow = TRUE)

# Name rows/columns (Bernolákovo theme)
rownames(m) <- c("Centrum", "Juhozápad", "Sever")
colnames(m) <- c("Doprava", "Zeleň", "Voda")

# Show matrix
m

# Row and column means
row_avgs <- rowMeans(m)
col_avgs <- colMeans(m)

row_avgs
col_avgs
```

```{r}
# --- Global setup (run first) ---
library(dplyr)
library(readr)

# Create bern_data once, no matter what you already have
if (!exists("bern_data")) {
  if (exists("bern_df")) {
    bern_data <- bern_df
  } else if (file.exists("bernolakovo_df.csv")) {
    bern_data <- read_csv("bernolakovo_df.csv", show_col_types = FALSE)
  } else {
    stop("bern_data is missing: create bern_df earlier OR place bernolakovo_df.csv next to this .qmd")
  }
}
```

## Question 4 List

```{r}
bernolakovolist <- list(
  description = "Bernolákovo mini-universe: basic facts, vectors for practice, and a themed matrix with stats.",
  
  scalars = list(
population   = population,
  area         = area,
has_water    = has_water,
    is_inhabited = is_inhabited,
    name         = name,
old_name     = old_name,
    region       = region,
 category     = category),
  
  vectors = list(
numeric  = numeric_vector,
  sequence = sequence_vector,
logical  = logical_vector ),
  
  matrix = m,
  
  matrix_stats = list(
     row_means = row_avgs,
col_means = col_avgs))


str(bernolakovolist)
```

## Question 5 Factor

```{r}
development_level <- factor(
  c("medium", "high", "medium", "low", "high", "medium", "low"),
  levels = c("low", "medium", "high"), ordered = TRUE
)

# Check counts
table(development_level)
```

## Question 6 Data Frame

```{r}
bern_df <- data.frame(
  district = c("Centrum", "Juhozápad", "Sever", "Východ", "Záhrady", "Pri Jazere"),
  pop      = c(1800, 1200, 950, 1100, 700, 450),              # numeric
  has_playground = c(TRUE, TRUE, FALSE, TRUE, FALSE, TRUE),   # logical
  zone = factor(c("mixed", "residential", "residential",  "industrial", "residential", "recreational"),
  levels = c("residential", "mixed", "industrial", "recreational")),
  dist_km  = c(0.2, 1.4, 1.1, 2.3, 1.8, 2.7)                  # numeric
)

# Inspect
str(bern_df)
summary(bern_df)

# Add a derived column (example rule)
bern_df$priority <- with(
  bern_df,
  ifelse(pop > 1000 & !has_playground, "high",
         ifelse(pop > 1000, "medium", "low"))
)
bern_df$priority <- factor(bern_df$priority, levels = c("low", "medium", "high"), ordered = TRUE)

# Quick checks
table(bern_df$zone)
table(bern_df$priority)
bern_df

```

```{r}
# --- Write to files ---
write.csv(bern_data, "bernolakovo_df.csv", row.names = FALSE)
saveRDS(bern_data, "bernolakovo_df.rds")

```

### 2.1. Querying Vectors

```{r}
# ---- Setup: ensure Task 1 objects exist ----
if (!exists("sequence_vector")) sequence_vector <- seq(20, 100, by = 5)
if (!exists("logical_vector"))  { set.seed(123); logical_vector <- sample(c(TRUE, FALSE), 10, TRUE) }
if (!exists("m")) {
set.seed(42)### 2.1. Querying Vectors
m <- matrix(sample(-50:50, 9, replace = TRUE), nrow = 3, byrow = TRUE)
rownames(m) <- c("Centrum", "Juhozápad", "Sever")
colnames(m) <- c("Doprava", "Zeleň", "Voda")
}
if (!exists("your_df")) {
your_df <- data.frame(
name         = c("Bernolákovo","Ivanka pri Dunaji","Senec","Tomášov","Malinovo"),
region       = c("Bratislavský kraj","Bratislavský kraj","Bratislavský kraj","Bratislavský kraj","Bratislavský kraj"),
category     = c("Obec","Obec","Mesto","Obec","Obec"),
population   = c(9000L, 6800L, 21000L, 3800L, 4300L),
area_km2     = c(14.5, 18.1, 38.6, 19.7, 10.2),
is_inhabited = c(TRUE, TRUE, TRUE, TRUE, TRUE),
has_water    = c(TRUE, TRUE, TRUE, FALSE, TRUE),
stringsAsFactors = FALSE
)
}
```

```{r}
# --- Setup for Task 2: basic objects ---

# Create a numeric sequence vector
sequence_vector <- seq(10, 50, by = 10)

# Create a logical vector
logical_vector <- c(TRUE, FALSE, TRUE, TRUE, FALSE)

# Create a 3x3 matrix
m <- matrix(1:9, nrow = 3)

```


2.1.1. From your Sequence vector (the one with all your numbers):
# ---- 2.1.1 Sequence vector ----

```{r}
# ---- 2.1.1 Sequence vector ----
sequence_vector[3]
sequence_vector[2:5]
sequence_vector[sequence_vector > 20]
```

2.1.2. From your Logical vector:

# ---- 2.1.2 Logical vector ----

```{r}
# ---- 2.1.2 Logical vector ----
logical_vector[logical_vector]
which(logical_vector)
```

### 2.2. Querying Your "Universe" List

```{r}
my_universe <- list(
description = "Mini-universe of Bernolákovo and surroundings.",
matrix3x3   = m,
vec         = sequence_vector
)

# access description via $

my_universe$description

# access 3x3 matrix via [[ ]]

my_universe[["matrix3x3"]]

# access the second element of inner vector

my_universe[["vec"]][2]
```

### 2.3. Investigating Your Data Frame

```{r}

# Show the first 3 rows
head(bern_data, 3)

# Value from 4th row, 1st column
bern_data[4, 1]

# Logical column as a vector
bern_data$has_playground

# Logical subsetting (example condition)
df_subset <- bern_data[bern_data$pop > 1000, ]
df_subset

# Subsetting with %in% (two categories from a column)
df_subset_2 <- bern_data[bern_data$zone %in% c("residential", "mixed"), ]
df_subset_2

```

### 2.4. Handling "Corrupted" Data (`NA`)

```{r, eval=FALSE}
### 2.4. Handling "Corrupted" Data (NA) — Bernolákovo

# Copy the dataset
df_corrupted <- bern_data

# Introduce 3 NA values
df_corrupted[2, "dist_km"]        <- NA
df_corrupted[5, "pop"]            <- NA
df_corrupted[3, "has_playground"] <- NA

# Total number of NA values
sum(is.na(df_corrupted))

# Number of NA values per column
colSums(is.na(df_corrupted))

# Mean of a numeric column with and without NA removal
mean(df_corrupted$pop)
mean(df_corrupted$pop, na.rm = TRUE)

# Create a clean version without missing values
df_clean <- na.omit(df_corrupted)
df_clean


```

### 2.5. Bonus Challenge: `which()`

```{r}
# index of max in a numeric column
 idx_max_pop <- which.max(bern_data$pop)
bern_data[idx_max_pop, ]
 
# index of min in another numeric column

idx_min_dist <- which.min(bern_data$dist_km)
bern_data[idx_min_dist, ]
```

###Task 3: Expanding Your Universe

Your “mini-universe” in Tasks 1 & 2 was a simulation. Now, it’s time to connect it to the real world.

Your mission is to find a real dataset that expands on your theme, import it into R, and explore it using the dplyr package.

3.1. The Quest: Find Your Data
Find one simple, real-world dataset that fits your theme.

Where to look: Kaggle, TidyTuesday, data.gov, or other public data portals.

Format: Any format you are able to read. For simplicity it is proposed to use textual (csv, txt) or Excel format.

Requirements:

At least 50 rows.

At least 4 columns.

A mix of numeric and character/factor data.

Action:

Download the data file and place it in your R project directory.

In your task file add a line with the link to the data source (e.g., Data from: https://…).

### 3.2. The Import: Load Your Data


Install tidyverse: If you haven’t, run install.packages("tidyverse") in your console (just once).

Load libraries: At the top of your script, add library(dplyr) and library(readr) (library(readxl) in case of Excel file format).

Read the data: Use read_csv() (or read_excel()) to load your dataset into a new data frame.

```{r}
# Load libraries
library(dplyr)
library(readr)

# Load data
bern_data <- read_csv("bernolakovo_df.csv")

# Quick inspection
glimpse(bern_data)
head(bern_data)
summary(bern_data)

```



###3.3. The Interrogation: Explore with dplyr
This is the core of the task. Your goal is to ask and answer 5 interesting questions about your new dataset.

You must write the question in plain English (as a comment), followed by the dplyr code that answers it.

You must use each of the following dplyr “verbs” at least once:

select() - To pick specific columns.

filter() - To subset rows based on a condition.

arrange() - To sort your results (e.g., with desc()).

mutate() - To create a new column.

group_by() and summarise() - To get summary statistics (like mean(), n(), max(), etc.).

Your 5 Questions (example):


**Question 1**: Which 5 cities have the highest population?

```{r}
bern_data %>%
  select(district, population = pop) %>%
  arrange(desc(population)) %>%
  head(5)
```


**Question 2**: What is the average temperature for each planet_type?

```{r}
bern_data %>%
  group_by(zone) %>%
  summarise(avg_population = mean(pop, na.rm = TRUE), n = n()) %>%
  arrange(desc(avg_population))
```


**Question 3**: How many pets are there of each animal_type?

```{r}
bern_data %>%
  filter(!is.na(dist_km), dist_km > 0) %>%
  mutate(density = pop / dist_km) %>%
  select(district, zone, density) %>%
  arrange(desc(density))
```


**Question 4**: What is the population density for each city?

```{r}
bern_data %>%
  filter(pop > 1000) %>%
  select(district, pop, zone) %>%
  arrange(desc(pop))
```


**Question 5**: Find all successful missions launched after 2010.

```{r}
bern_data %>%
  group_by(zone, has_playground) %>%
  summarise(count = n(), .groups = "drop") %>%
  arrange(zone, desc(has_playground))
```


